/*! For license information please see 49311.9b7077dca04aa7d6.js.LICENSE.txt */
"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["49311"],{82238:function(t,e,i){i.d(e,{s:()=>v});i("71695"),i("19423"),i("47021");var n=i("9065"),a=i("6374"),s=i("50778"),r=i("11911"),o=i("44491"),c=i("84266"),l=i("57243"),d=i("35359");let u,h,f,m=t=>t;const g=o.Vq?{passive:!0}:void 0;class p extends r.H{constructor(){super(...arguments),this.centerTitle=!1,this.handleTargetScroll=()=>{this.mdcFoundation.handleTargetScroll()},this.handleNavigationClick=()=>{this.mdcFoundation.handleNavigationClick()}}get scrollTarget(){return this._scrollTarget||window}set scrollTarget(t){this.unregisterScrollListener();const e=this.scrollTarget;this._scrollTarget=t,this.updateRootPosition(),this.requestUpdate("scrollTarget",e),this.registerScrollListener()}updateRootPosition(){if(this.mdcRoot){const t=this.scrollTarget===window;this.mdcRoot.style.position=t?"":"absolute"}}render(){let t=(0,l.dy)(u||(u=m`<span class="mdc-top-app-bar__title"><slot name="title"></slot></span>`));return this.centerTitle&&(t=(0,l.dy)(h||(h=m`<section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-center">${0}</section>`),t)),(0,l.dy)(f||(f=m` <header class="mdc-top-app-bar ${0}"> <div class="mdc-top-app-bar__row"> <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start" id="navigation"> <slot name="navigationIcon" @click="${0}"></slot> ${0} </section> ${0} <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" id="actions" role="toolbar"> <slot name="actionItems"></slot> </section> </div> </header> <div class="${0}"> <slot></slot> </div> `),(0,d.$)(this.barClasses()),this.handleNavigationClick,this.centerTitle?null:t,this.centerTitle?t:null,(0,d.$)(this.contentClasses()))}createAdapter(){return Object.assign(Object.assign({},(0,r.q)(this.mdcRoot)),{setStyle:(t,e)=>this.mdcRoot.style.setProperty(t,e),getTopAppBarHeight:()=>this.mdcRoot.clientHeight,notifyNavigationIconClicked:()=>{this.dispatchEvent(new Event(c.j2.NAVIGATION_EVENT,{bubbles:!0,cancelable:!0}))},getViewportScrollY:()=>this.scrollTarget instanceof Window?this.scrollTarget.pageYOffset:this.scrollTarget.scrollTop,getTotalActionItems:()=>this._actionItemsSlot.assignedNodes({flatten:!0}).length})}registerListeners(){this.registerScrollListener()}unregisterListeners(){this.unregisterScrollListener()}registerScrollListener(){this.scrollTarget.addEventListener("scroll",this.handleTargetScroll,g)}unregisterScrollListener(){this.scrollTarget.removeEventListener("scroll",this.handleTargetScroll)}firstUpdated(){super.firstUpdated(),this.updateRootPosition(),this.registerListeners()}disconnectedCallback(){super.disconnectedCallback(),this.unregisterListeners()}}(0,n.__decorate)([(0,s.IO)(".mdc-top-app-bar")],p.prototype,"mdcRoot",void 0),(0,n.__decorate)([(0,s.IO)('slot[name="actionItems"]')],p.prototype,"_actionItemsSlot",void 0),(0,n.__decorate)([(0,s.Cb)({type:Boolean})],p.prototype,"centerTitle",void 0),(0,n.__decorate)([(0,s.Cb)({type:Object})],p.prototype,"scrollTarget",null);class _ extends p{constructor(){super(...arguments),this.mdcFoundationClass=a.Z,this.prominent=!1,this.dense=!1,this.handleResize=()=>{this.mdcFoundation.handleWindowResize()}}barClasses(){return{"mdc-top-app-bar--dense":this.dense,"mdc-top-app-bar--prominent":this.prominent,"center-title":this.centerTitle}}contentClasses(){return{"mdc-top-app-bar--fixed-adjust":!this.dense&&!this.prominent,"mdc-top-app-bar--dense-fixed-adjust":this.dense&&!this.prominent,"mdc-top-app-bar--prominent-fixed-adjust":!this.dense&&this.prominent,"mdc-top-app-bar--dense-prominent-fixed-adjust":this.dense&&this.prominent}}registerListeners(){super.registerListeners(),window.addEventListener("resize",this.handleResize,g)}unregisterListeners(){super.unregisterListeners(),window.removeEventListener("resize",this.handleResize)}}(0,n.__decorate)([(0,s.Cb)({type:Boolean,reflect:!0})],_.prototype,"prominent",void 0),(0,n.__decorate)([(0,s.Cb)({type:Boolean,reflect:!0})],_.prototype,"dense",void 0);var y=i("82823");class v extends _{constructor(){super(...arguments),this.mdcFoundationClass=y.Z}barClasses(){return Object.assign(Object.assign({},super.barClasses()),{"mdc-top-app-bar--fixed":!0})}registerListeners(){this.scrollTarget.addEventListener("scroll",this.handleTargetScroll,g)}unregisterListeners(){this.scrollTarget.removeEventListener("scroll",this.handleTargetScroll)}}},95262:function(t,e,i){function n(t){return null==t||Array.isArray(t)?t:[t]}i.d(e,{r:function(){return n}})},92636:function(t,e,i){i.d(e,{z:function(){return n}});i(19083),i(61006);const n=t=>(e,i)=>t.includes(e,i)},50875:function(t,e,i){i.d(e,{Eu:function(){return s},hZ:function(){return r}});var n=i(11259);const a=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#9498a0","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#74787f","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#b6bac2","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function s(t){return a[t%a.length]}function r(t,e){const i=e.getPropertyValue(`--graph-color-${t+1}`)||s(t);return(0,n.Rq)(i)}},75011:function(t,e,i){i.d(e,{I:function(){return a},k:function(){return n}});i(71695),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(47021);const n=new Set(["primary","accent","disabled","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white"]);function a(t){return n.has(t)?`var(--${t}-color)`:t}},97674:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{AH:function(){return g},Ai:function(){return _},Al:function(){return y},vA:function(){return p}});var a=i(86319),s=i(3938),r=i(6542),o=i(23459),c=i(2621),l=i(14276),d=i(23711),u=i(35895),h=i(20382),f=t([u]);u=(f.then?(await f)():f)[0];const m=(t,e,i,n)=>{const a=i((0,u.zW)(t,e),n);return a instanceof Date?(0,u.Nm)(a,e):a},g=(t,e,i,n,a)=>i.time_zone===h.c_.server?m(t,n.time_zone,e,a):e(t,a),p=(t,e,i,n,a)=>i.time_zone===h.c_.server?m(t,n.time_zone,e,a):e(t,a),_=(t,e,i,n,a)=>p(t,i,n,a,n.time_zone===h.c_.server?(0,u.zW)(e,a.time_zone):e),y=(t,e,i,n,u)=>{let h,f;if(p(t,a.b,n,u)&&p(e,s.h,n,u)){const a=(_(e,t,r.d,n,u)+1)*(i?1:-1);h=g(t,o.z,n,u,a),f=g(g(e,o.z,n,u,a),c.V,n,u)}else{const a=(_(e,t,l._,n,u)+1)*(i?1:-1);h=g(t,d.n,n,u,a),f=g(e,d.n,n,u,a)}return{start:h,end:f}};n()}catch(m){n(m)}}))},19631:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{Bt:function(){return l},T8:function(){return d}});i(19083);var a=i(16485),s=i(88977),r=i(20382),o=t([a]);a=(o.then?(await o)():o)[0];const c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],l=t=>t.first_weekday===r.FS.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(t.language).weekInfo.firstDay%7:(0,s.L)(t.language)%7:c.includes(t.first_weekday)?c.indexOf(t.first_weekday):1,d=t=>{const e=l(t);return c[e]};n()}catch(c){n(c)}}))},46467:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{D_:function(){return $},NC:function(){return v},Nh:function(){return k},U8:function(){return D},WB:function(){return g},mn:function(){return f},p6:function(){return u},pU:function(){return l},ud:function(){return _},yQ:function(){return C}});i(63434),i(96829),i(39527),i(67670);var a=i(16485),s=i(27486),r=i(20382),o=i(11104),c=t([a,o]);[a,o]=c.then?(await c)():c;const l=(t,e,i)=>d(e,i.time_zone).format(t),d=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",month:"long",day:"numeric",timeZone:(0,o.f)(t.time_zone,e)}))),u=(t,e,i)=>h(e,i.time_zone).format(t),h=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",timeZone:(0,o.f)(t.time_zone,e)}))),f=(t,e,i)=>m(e,i.time_zone).format(t),m=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"short",day:"numeric",timeZone:(0,o.f)(t.time_zone,e)}))),g=(t,e,i)=>{var n,a,s,o;const c=p(e,i.time_zone);if(e.date_format===r.t6.language||e.date_format===r.t6.system)return c.format(t);const l=c.formatToParts(t),d=null===(n=l.find((t=>"literal"===t.type)))||void 0===n?void 0:n.value,u=null===(a=l.find((t=>"day"===t.type)))||void 0===a?void 0:a.value,h=null===(s=l.find((t=>"month"===t.type)))||void 0===s?void 0:s.value,f=null===(o=l.find((t=>"year"===t.type)))||void 0===o?void 0:o.value,m=l.at(l.length-1);let g="literal"===(null==m?void 0:m.type)?null==m?void 0:m.value:"";"bg"===e.language&&e.date_format===r.t6.YMD&&(g="");return{[r.t6.DMY]:`${u}${d}${h}${d}${f}${g}`,[r.t6.MDY]:`${h}${d}${u}${d}${f}${g}`,[r.t6.YMD]:`${f}${d}${h}${d}${u}${g}`}[e.date_format]},p=(0,s.Z)(((t,e)=>{const i=t.date_format===r.t6.system?void 0:t.language;return t.date_format===r.t6.language||(t.date_format,r.t6.system),new Intl.DateTimeFormat(i,{year:"numeric",month:"numeric",day:"numeric",timeZone:(0,o.f)(t.time_zone,e)})})),_=(t,e,i)=>y(e,i.time_zone).format(t),y=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{day:"numeric",month:"short",timeZone:(0,o.f)(t.time_zone,e)}))),v=(t,e,i)=>b(e,i.time_zone).format(t),b=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{month:"long",year:"numeric",timeZone:(0,o.f)(t.time_zone,e)}))),k=(t,e,i)=>w(e,i.time_zone).format(t),w=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{month:"long",timeZone:(0,o.f)(t.time_zone,e)}))),C=(t,e,i)=>S(e,i.time_zone).format(t),S=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",timeZone:(0,o.f)(t.time_zone,e)}))),$=(t,e,i)=>x(e,i.time_zone).format(t),x=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",timeZone:(0,o.f)(t.time_zone,e)}))),D=(t,e,i)=>I(e,i.time_zone).format(t),I=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"short",timeZone:(0,o.f)(t.time_zone,e)})));n()}catch(l){n(l)}}))},64214:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{DG:function(){return f},E8:function(){return _},NR:function(){return v},o0:function(){return u},yD:function(){return g}});var a=i(16485),s=i(27486),r=i(46467),o=i(33570),c=i(11104),l=i(16922),d=t([a,c,r,o]);[a,c,r,o]=d.then?(await d)():d;const u=(t,e,i)=>h(e,i.time_zone).format(t),h=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",hour:(0,l.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,l.y)(t)?"h12":"h23",timeZone:(0,c.f)(t.time_zone,e)}))),f=(t,e,i)=>m(e,i.time_zone).format(t),m=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"short",day:"numeric",hour:(0,l.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,l.y)(t)?"h12":"h23",timeZone:(0,c.f)(t.time_zone,e)}))),g=(t,e,i)=>p(e,i.time_zone).format(t),p=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{month:"short",day:"numeric",hour:(0,l.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,l.y)(t)?"h12":"h23",timeZone:(0,c.f)(t.time_zone,e)}))),_=(t,e,i)=>y(e,i.time_zone).format(t),y=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",hour:(0,l.y)(t)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,l.y)(t)?"h12":"h23",timeZone:(0,c.f)(t.time_zone,e)}))),v=(t,e,i)=>`${(0,r.WB)(t,e,i)}, ${(0,o.mr)(t,e,i)}`;n()}catch(u){n(u)}}))},54363:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{$k:function(){return l},K:function(){return f},LU:function(){return y},a_:function(){return m},h6:function(){return u}});i(52247),i(95078);var a=i(16485),s=i(27486),r=i(34618),o=t([a]);a=(o.then?(await o)():o)[0];const c=t=>t<10?`0${t}`:t,l=(t,e)=>{const i=e.days||0,n=e.hours||0,a=e.minutes||0,s=e.seconds||0,r=e.milliseconds||0;return i>0?`${Intl.NumberFormat(t.language,{style:"unit",unit:"day",unitDisplay:"long"}).format(i)} ${n}:${c(a)}:${c(s)}`:n>0?`${n}:${c(a)}:${c(s)}`:a>0?`${a}:${c(s)}`:s>0?Intl.NumberFormat(t.language,{style:"unit",unit:"second",unitDisplay:"long"}).format(s):r>0?Intl.NumberFormat(t.language,{style:"unit",unit:"millisecond",unitDisplay:"long"}).format(r):null},d=(0,s.Z)((t=>new Intl.DurationFormat(t.language,{style:"long"}))),u=(t,e)=>d(t).format(e),h=(0,s.Z)((t=>new Intl.DurationFormat(t.language,{style:"digital",hoursDisplay:"auto"}))),f=(t,e)=>h(t).format(e),m=["min","h","d"],g=(0,s.Z)((t=>new Intl.DurationFormat(t.language,{style:"narrow",daysDisplay:"always"}))),p=(0,s.Z)((t=>new Intl.DurationFormat(t.language,{style:"narrow",hoursDisplay:"always"}))),_=(0,s.Z)((t=>new Intl.DurationFormat(t.language,{style:"narrow",minutesDisplay:"always"}))),y=(t,e,i,n)=>{const a=void 0!==n?(0,r.N)(parseFloat(e),n):parseFloat(e);switch(i){case"d":{const e=Math.floor(a),i={days:e,hours:Math.floor(24*(a-e))};return g(t).format(i)}case"h":{const e=Math.floor(a),i={hours:e,minutes:Math.floor(60*(a-e))};return p(t).format(i)}case"min":{const e=Math.floor(a),i={minutes:e,seconds:Math.floor(60*(a-e))};return _(t).format(i)}default:throw new Error("Invalid duration unit")}};n()}catch(c){n(c)}}))},33570:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{Vu:function(){return u},Zs:function(){return g},mr:function(){return l},xO:function(){return f}});var a=i(16485),s=i(27486),r=i(11104),o=i(16922),c=t([a,r]);[a,r]=c.then?(await c)():c;const l=(t,e,i)=>d(e,i.time_zone).format(t),d=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{hour:"numeric",minute:"2-digit",hourCycle:(0,o.y)(t)?"h12":"h23",timeZone:(0,r.f)(t.time_zone,e)}))),u=(t,e,i)=>h(e,i.time_zone).format(t),h=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{hour:(0,o.y)(t)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,o.y)(t)?"h12":"h23",timeZone:(0,r.f)(t.time_zone,e)}))),f=(t,e,i)=>m(e,i.time_zone).format(t),m=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat(t.language,{weekday:"long",hour:(0,o.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,o.y)(t)?"h12":"h23",timeZone:(0,r.f)(t.time_zone,e)}))),g=(t,e,i)=>p(e,i.time_zone).format(t),p=(0,s.Z)(((t,e)=>new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"2-digit",hour12:!1,timeZone:(0,r.f)(t.time_zone,e)})));n()}catch(l){n(l)}}))},11104:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{f:function(){return h}});var a,s,r,o=i(16485),c=i(20382),l=t([o]);o=(l.then?(await l)():l)[0];const d=null===(a=Intl.DateTimeFormat)||void 0===a||null===(s=(r=a.call(Intl)).resolvedOptions)||void 0===s?void 0:s.call(r).timeZone,u=null!=d?d:"UTC",h=(t,e)=>t===c.c_.local&&d?u:e;n()}catch(d){n(d)}}))},16922:function(t,e,i){i.d(e,{y:function(){return s}});i(19083),i(61006);var n=i(27486),a=i(20382);const s=(0,n.Z)((t=>{if(t.time_format===a.zt.language||t.time_format===a.zt.system){const e=t.time_format===a.zt.language?t.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(e).includes("10")}return t.time_format===a.zt.am_pm}))},68958:function(t,e,i){i.d(e,{t:function(){return s}});i(92745),i(77439),i(19423),i(39527),i(41360),i(88972);class n{constructor(t=window.localStorage){this.storage=void 0,this._storage={},this._listeners={},this.storage=t,t===window.localStorage&&window.addEventListener("storage",(t=>{t.key&&this.hasKey(t.key)&&(this._storage[t.key]=t.newValue?JSON.parse(t.newValue):t.newValue,this._listeners[t.key]&&this._listeners[t.key].forEach((e=>e(t.oldValue?JSON.parse(t.oldValue):t.oldValue,this._storage[t.key]))))}))}addFromStorage(t){if(!this._storage[t]){const e=this.storage.getItem(t);e&&(this._storage[t]=JSON.parse(e))}}subscribeChanges(t,e){return this._listeners[t]?this._listeners[t].push(e):this._listeners[t]=[e],()=>{this.unsubscribeChanges(t,e)}}unsubscribeChanges(t,e){if(!(t in this._listeners))return;const i=this._listeners[t].indexOf(e);-1!==i&&this._listeners[t].splice(i,1)}hasKey(t){return t in this._storage}getValue(t){return this._storage[t]}setValue(t,e){const i=this._storage[t];this._storage[t]=e;try{void 0===e?this.storage.removeItem(t):this.storage.setItem(t,JSON.stringify(e))}catch(n){}finally{this._listeners[t]&&this._listeners[t].forEach((t=>t(i,e)))}}}const a={},s=t=>e=>{const i=t.storage||"localStorage";let s;i&&i in a?s=a[i]:(s=new n(window[i]),a[i]=s);const r=String(e.key),o=t.key||String(e.key),c=e.initializer?e.initializer():void 0;s.addFromStorage(o);const l=!1!==t.subscribe?t=>s.subscribeChanges(o,((i,n)=>{t.requestUpdate(e.key,i)})):void 0,d=()=>s.hasKey(o)?t.deserializer?t.deserializer(s.getValue(o)):s.getValue(o):c;return{kind:"method",placement:"prototype",key:e.key,descriptor:{set(i){((i,n)=>{let a;t.state&&(a=d()),s.setValue(o,t.serializer?t.serializer(n):n),t.state&&i.requestUpdate(e.key,a)})(this,i)},get(){return d()},enumerable:!0,configurable:!0},finisher(i){if(t.state&&t.subscribe){const t=i.prototype.connectedCallback,e=i.prototype.disconnectedCallback;i.prototype.connectedCallback=function(){t.call(this),this[`__unbsubLocalStorage${r}`]=null==l?void 0:l(this)},i.prototype.disconnectedCallback=function(){var t;e.call(this),null===(t=this[`__unbsubLocalStorage${r}`])||void 0===t||t.call(this),this[`__unbsubLocalStorage${r}`]=void 0}}t.state&&i.createProperty(e.key,Object.assign({noAccessor:!0},t.stateOptions))}}}},49976:function(t,e,i){i.d(e,{U:function(){return n}});const n=t=>t.stopPropagation()},59847:function(t,e,i){i.d(e,{N:function(){return a}});var n=i(73850);const a=t=>(0,n.M)(t.entity_id)},75278:function(t,e,i){i.d(e,{e:function(){return n}});const n=(t,e)=>a(t.attributes,e),a=(t,e)=>!!(t.supported_features&e)},31064:function(t,e,i){i.d(e,{T:function(){return a}});i(19134),i(5740);const n=/^(\w+)\.(\w+)$/,a=t=>n.test(t)},34593:function(t,e,i){i.d(e,{Y:function(){return a},u:function(){return n}});const n=(t,e,i)=>Math.min(Math.max(t,e),i),a=(t,e,i)=>{let n;return n=null!=e?Math.max(t,e):t,n=null!=i?Math.min(n,i):n,n}},50602:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{Hd:function(){return d},SL:function(){return c},l4:function(){return h},sJ:function(){return l},uf:function(){return u}});var a=i(16485),s=(i(19083),i(19423),i(11740),i(61006),i(20382)),r=i(34618),o=t([a]);a=(o.then?(await o)():o)[0];const c=t=>l(t.attributes),l=(t,e)=>!!t.unit_of_measurement||!!t.state_class||(e||[]).includes(t.device_class||""),d=t=>{switch(t.number_format){case s.y4.comma_decimal:return["en-US","en"];case s.y4.decimal_comma:return["de","es","it"];case s.y4.space_comma:return["fr","sv","cs"];case s.y4.system:return;default:return t.language}},u=(t,e,i)=>{const n=e?d(e):void 0;return Number.isNaN=Number.isNaN||function t(e){return"number"==typeof e&&t(e)},(null==e?void 0:e.number_format)===s.y4.none||Number.isNaN(Number(t))?Number.isNaN(Number(t))||""===t||(null==e?void 0:e.number_format)!==s.y4.none?"string"==typeof t?t:`${(0,r.N)(t,null==i?void 0:i.maximumFractionDigits).toString()}${"currency"===(null==i?void 0:i.style)?` ${i.currency}`:""}`:new Intl.NumberFormat("en-US",f(t,Object.assign(Object.assign({},i),{},{useGrouping:!1}))).format(Number(t)):new Intl.NumberFormat(n,f(t,i)).format(Number(t))},h=(t,e)=>{var i;const n=null==e?void 0:e.display_precision;return null!=n?{maximumFractionDigits:n,minimumFractionDigits:n}:Number.isInteger(Number(null==t||null===(i=t.attributes)||void 0===i?void 0:i.step))&&Number.isInteger(Number(null==t?void 0:t.state))?{maximumFractionDigits:0}:void 0},f=(t,e)=>{const i=Object.assign({maximumFractionDigits:2},e);if("string"!=typeof t)return i;if(!e||void 0===e.minimumFractionDigits&&void 0===e.maximumFractionDigits){const e=t.indexOf(".")>-1?t.split(".")[1].length:0;i.minimumFractionDigits=e,i.maximumFractionDigits=e}return i};n()}catch(c){n(c)}}))},45061:function(t,e,i){i.d(e,{K:function(){return n}});const n=t=>{switch(t.language){case"cs":case"de":case"fi":case"fr":case"sk":case"sv":return" ";default:return""}}},87974:function(t,e,i){i.d(e,{L:function(){return a}});var n=i(45061);const a=(t,e)=>"°"===t?"":e&&"%"===t?(0,n.K)(e):" "},35830:function(t,e,i){i.d(e,{q:function(){return n}});const n=t=>{const e=window.location.pathname;return t?e+"?"+t:e}},93826:function(t,e,i){i.d(e,{P:function(){return n}});i(71695),i(47021);const n=(t,e,i=!0,n=!0)=>{let a,s=0;const r=(...r)=>{const o=()=>{s=!1===i?0:Date.now(),a=void 0,t(...r)},c=Date.now();s||!1!==i||(s=c);const l=e-(c-s);l<=0||l>e?(a&&(clearTimeout(a),a=void 0),s=c,t(...r)):a||!1===n||(a=window.setTimeout(o,l))};return r.cancel=()=>{clearTimeout(a),a=void 0,s=0},r}},65354:function(t,e,i){i.d(e,{U:function(){return f}});i(71695),i(47021);var n=i(50875),a=i(11259),s=i(4643),r=i(73850),o=i(42818),c=i(96194),l=i(76190);const d={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};let u=0;const h=new Map;function f(t,e,i){return function(t,e,i){var n;if(!i||t===c.nZ)return(0,l.g)("--history-unavailable-color",e);if(t===c.lz)return(0,l.g)("--history-unknown-color",e);const u=(0,o.tD)(i,t);if(!u)return;const h=(0,l.g)(u,e);if(!h)return;const f=(0,r.M)(i.entity_id),m=null===(n=d[f])||void 0===n?void 0:n[t];return m?(0,a.uO)((0,s.C)((0,a.Rw)((0,a.wK)(h)),m)):h}(t,e,i)||function(t,e){if(h.has(t))return h.get(t);const i=(0,n.hZ)(u,e);return u++,h.set(t,i),i}(t,e)}},34273:function(t,e,i){var n=i(61701),a=i(72621),s=(i(71695),i(39527),i(41360),i(47021),i(22997),i(57243)),r=i(50778),o=i(5111),c=i(76525);let l,d,u=t=>t;(0,n.Z)([(0,r.Mo)("ha-button-menu")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",key:c.gA,value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"corner",value(){return"BOTTOM_START"}},{kind:"field",decorators:[(0,r.Cb)({attribute:"menu-corner"})],key:"menuCorner",value(){return"START"}},{kind:"field",decorators:[(0,r.Cb)({type:Number})],key:"x",value(){return null}},{kind:"field",decorators:[(0,r.Cb)({type:Number})],key:"y",value(){return null}},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"multi",value(){return!1}},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"activatable",value(){return!1}},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"disabled",value(){return!1}},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"fixed",value(){return!1}},{kind:"field",decorators:[(0,r.Cb)({type:Boolean,attribute:"no-anchor"})],key:"noAnchor",value(){return!1}},{kind:"field",decorators:[(0,r.IO)("mwc-menu",!0)],key:"_menu",value:void 0},{kind:"get",key:"items",value:function(){var t;return null===(t=this._menu)||void 0===t?void 0:t.items}},{kind:"get",key:"selected",value:function(){var t;return null===(t=this._menu)||void 0===t?void 0:t.selected}},{kind:"method",key:"focus",value:function(){var t,e;null!==(t=this._menu)&&void 0!==t&&t.open?this._menu.focusItemAtIndex(0):null===(e=this._triggerButton)||void 0===e||e.focus()}},{kind:"method",key:"render",value:function(){return(0,s.dy)(l||(l=u` <div @click="${0}"> <slot name="trigger" @slotchange="${0}"></slot> </div> <mwc-menu .corner="${0}" .menuCorner="${0}" .fixed="${0}" .multi="${0}" .activatable="${0}" .y="${0}" .x="${0}"> <slot></slot> </mwc-menu> `),this._handleClick,this._setTriggerAria,this.corner,this.menuCorner,this.fixed,this.multi,this.activatable,this.y,this.x)}},{kind:"method",key:"firstUpdated",value:function(t){(0,a.Z)(i,"firstUpdated",this,3)([t]),"rtl"===o.E.document.dir&&this.updateComplete.then((()=>{this.querySelectorAll("mwc-list-item").forEach((t=>{const e=document.createElement("style");e.innerHTML="span.material-icons:first-of-type { margin-left: var(--mdc-list-item-graphic-margin, 32px) !important; margin-right: 0px !important;}",t.shadowRoot.appendChild(e)}))}))}},{kind:"method",key:"_handleClick",value:function(){this.disabled||(this._menu.anchor=this.noAnchor?null:this,this._menu.show())}},{kind:"get",key:"_triggerButton",value:function(){return this.querySelector('ha-icon-button[slot="trigger"], mwc-button[slot="trigger"]')}},{kind:"method",key:"_setTriggerAria",value:function(){this._triggerButton&&(this._triggerButton.ariaHasPopup="menu")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,s.iv)(d||(d=u`:host{display:inline-block;position:relative}::slotted([disabled]){color:var(--disabled-text-color)}`))}}]}}),s.oi)},65981:function(t,e,i){i.r(e),i.d(e,{HaIcon:()=>$});var n=i("61701"),a=i("72621"),s=(i("19083"),i("71695"),i("40251"),i("61006"),i("47021"),i("57243")),r=i("50778"),o=i("36522"),c=i("22381"),l=i("80654"),d=(i("92745"),i("39527"),i("41360"),i("27608")),u=i("27486"),h=i("37394");const f=JSON.parse('{"version":"7.4.47","parts":[{"file":"7a7139d465f1f41cb26ab851a17caa21a9331234"},{"start":"account-supervisor-circle-","file":"9561286c4c1021d46b9006596812178190a7cc1c"},{"start":"alpha-r-c","file":"eb466b7087fb2b4d23376ea9bc86693c45c500fa"},{"start":"arrow-decision-o","file":"4b3c01b7e0723b702940c5ac46fb9e555646972b"},{"start":"baby-f","file":"2611401d85450b95ab448ad1d02c1a432b409ed2"},{"start":"battery-hi","file":"89bcd31855b34cd9d31ac693fb073277e74f1f6a"},{"start":"blur-r","file":"373709cd5d7e688c2addc9a6c5d26c2d57c02c48"},{"start":"briefcase-account-","file":"a75956cf812ee90ee4f656274426aafac81e1053"},{"start":"calendar-question-","file":"3253f2529b5ebdd110b411917bacfacb5b7063e6"},{"start":"car-lig","file":"74566af3501ad6ae58ad13a8b6921b3cc2ef879d"},{"start":"cellphone-co","file":"7677f1cfb2dd4f5562a2aa6d3ae43a2e6997b21a"},{"start":"circle-slice-2","file":"70d08c50ec4522dd75d11338db57846588263ee2"},{"start":"cloud-co","file":"141d2bfa55ca4c83f4bae2812a5da59a84fec4ff"},{"start":"cog-s","file":"5a640365f8e47c609005d5e098e0e8104286d120"},{"start":"cookie-l","file":"dd85b8eb8581b176d3acf75d1bd82e61ca1ba2fc"},{"start":"currency-eur-","file":"15362279f4ebfc3620ae55f79d2830ad86d5213e"},{"start":"delete-o","file":"239434ab8df61237277d7599ebe066c55806c274"},{"start":"draw-","file":"5605918a592070803ba2ad05a5aba06263da0d70"},{"start":"emoticon-po","file":"a838cfcec34323946237a9f18e66945f55260f78"},{"start":"fan","file":"effd56103b37a8c7f332e22de8e4d67a69b70db7"},{"start":"file-question-","file":"b2424b50bd465ae192593f1c3d086c5eec893af8"},{"start":"flask-off-","file":"3b76295cde006a18f0301dd98eed8c57e1d5a425"},{"start":"food-s","file":"1c6941474cbeb1755faaaf5771440577f4f1f9c6"},{"start":"gamepad-u","file":"c6efe18db6bc9654ae3540c7dee83218a5450263"},{"start":"google-f","file":"df341afe6ad4437457cf188499cb8d2df8ac7b9e"},{"start":"head-c","file":"282121c9e45ed67f033edcc1eafd279334c00f46"},{"start":"home-pl","file":"27e8e38fc7adcacf2a210802f27d841b49c8c508"},{"start":"inbox-","file":"0f0316ec7b1b7f7ce3eaabce26c9ef619b5a1694"},{"start":"key-v","file":"ea33462be7b953ff1eafc5dac2d166b210685a60"},{"start":"leaf-circle-","file":"33db9bbd66ce48a2db3e987fdbd37fb0482145a4"},{"start":"lock-p","file":"b89e27ed39e9d10c44259362a4b57f3c579d3ec8"},{"start":"message-s","file":"7b5ab5a5cadbe06e3113ec148f044aa701eac53a"},{"start":"moti","file":"01024d78c248d36805b565e343dd98033cc3bcaf"},{"start":"newspaper-variant-o","file":"22a6ec4a4fdd0a7c0acaf805f6127b38723c9189"},{"start":"on","file":"c73d55b412f394e64632e2011a59aa05e5a1f50d"},{"start":"paw-ou","file":"3f669bf26d16752dc4a9ea349492df93a13dcfbf"},{"start":"pigg","file":"0c24edb27eb1c90b6e33fc05f34ef3118fa94256"},{"start":"printer-pos-sy","file":"41a55cda866f90b99a64395c3bb18c14983dcf0a"},{"start":"read","file":"c7ed91552a3a64c9be88c85e807404cf705b7edf"},{"start":"robot-vacuum-variant-o","file":"917d2a35d7268c0ea9ad9ecab2778060e19d90e0"},{"start":"sees","file":"6e82d9861d8fac30102bafa212021b819f303bdb"},{"start":"shoe-f","file":"e2fe7ce02b5472301418cc90a0e631f187b9f238"},{"start":"snowflake-m","file":"a28ba9f5309090c8b49a27ca20ff582a944f6e71"},{"start":"st","file":"7e92d03f095ec27e137b708b879dfd273bd735ab"},{"start":"su","file":"61c74913720f9de59a379bdca37f1d2f0dc1f9db"},{"start":"tag-plus-","file":"8f3184156a4f38549cf4c4fffba73a6a941166ae"},{"start":"timer-a","file":"baab470d11cfb3a3cd3b063ee6503a77d12a80d0"},{"start":"transit-d","file":"8561c0d9b1ac03fab360fd8fe9729c96e8693239"},{"start":"vector-arrange-b","file":"c9a3439257d4bab33d3355f1f2e11842e8171141"},{"start":"water-ou","file":"02dbccfb8ca35f39b99f5a085b095fc1275005a0"},{"start":"webc","file":"57bafd4b97341f4f2ac20a609d023719f23a619c"},{"start":"zip","file":"65ae094e8263236fa50486584a08c03497a38d93"}]}'),m=(0,u.Z)((async()=>{const t=(0,d.MT)("hass-icon-db","mdi-icon-store");{const e=await(0,d.U2)("_version",t);e?e!==f.version&&(await(0,d.ZH)(t),(0,d.t8)("_version",f.version,t)):(0,d.t8)("_version",f.version,t)}return t})),g=["mdi","hass","hassio","hademo"];let p=[];i("37583");let _,y,v,b=t=>t;const k={},w={},C=(0,c.D)((()=>(async t=>{const e=Object.keys(t),i=await Promise.all(Object.values(t));(await m())("readwrite",(n=>{i.forEach(((i,a)=>{Object.entries(i).forEach((([t,e])=>{n.put(e,t)})),delete t[e[a]]}))}))})(w)),2e3),S={};let $=(0,n.Z)([(0,r.Mo)("ha-icon")],(function(t,e){class n extends e{constructor(...e){super(...e),t(this)}}return{F:n,d:[{kind:"field",decorators:[(0,r.Cb)()],key:"icon",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_path",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_secondaryPath",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_viewBox",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_legacy",value(){return!1}},{kind:"method",key:"willUpdate",value:function(t){(0,a.Z)(n,"willUpdate",this,3)([t]),t.has("icon")&&(this._path=void 0,this._secondaryPath=void 0,this._viewBox=void 0,this._loadIcon())}},{kind:"method",key:"render",value:function(){return this.icon?this._legacy?(0,s.dy)(_||(_=b` <iron-icon .icon="${0}"></iron-icon>`),this.icon):(0,s.dy)(y||(y=b`<ha-svg-icon .path="${0}" .secondaryPath="${0}" .viewBox="${0}"></ha-svg-icon>`),this._path,this._secondaryPath,this._viewBox):s.Ld}},{kind:"method",key:"_loadIcon",value:async function(){if(!this.icon)return;const t=this.icon,[e,n]=this.icon.split(":",2);let a,s=n;if(!e||!s)return;if(!g.includes(e)){const i=l.g[e];return i?void(i&&"function"==typeof i.getIcon&&this._setCustomPath(i.getIcon(s),t)):void(this._legacy=!0)}if(this._legacy=!1,s in k){const t=k[s];let i;t.newName?(i=`Icon ${e}:${s} was renamed to ${e}:${t.newName}, please change your config, it will be removed in version ${t.removeIn}.`,s=t.newName):i=`Icon ${e}:${s} was removed from MDI, please replace this icon with an other icon in your config, it will be removed in version ${t.removeIn}.`,console.warn(i),(0,o.B)(this,"write_log",{level:"warning",message:i})}if(s in S)return void(this._path=S[s]);if("home-assistant"===s){const e=(await i.e("48348").then(i.bind(i,30511))).mdiHomeAssistant;return this.icon===t&&(this._path=e),void(S[s]=e)}try{a=await(t=>new Promise(((e,i)=>{if(p.push([t,e,i]),p.length>1)return;const n=m();(0,h.n)(1e3,(async()=>{(await n)("readonly",(t=>{for(const[e,i,n]of p)(0,d.RV)(t.get(e)).then((t=>i(t))).catch((t=>n(t)));p=[]}))})()).catch((t=>{for(const[,,e]of p)e(t);p=[]}))})))(s)}catch(u){a=void 0}if(a)return this.icon===t&&(this._path=a),void(S[s]=a);const r=(t=>{let e;for(const i of f.parts){if(void 0!==i.start&&t<i.start)break;e=i}return e.file})(s);if(r in w)return void this._setPath(w[r],s,t);const c=fetch(`/static/mdi/${r}.json`).then((t=>t.json()));w[r]=c,this._setPath(c,s,t),C()}},{kind:"method",key:"_setCustomPath",value:async function(t,e){const i=await t;this.icon===e&&(this._path=i.path,this._secondaryPath=i.secondaryPath,this._viewBox=i.viewBox)}},{kind:"method",key:"_setPath",value:async function(t,e,i){const n=await t;this.icon===i&&(this._path=n[e]),S[e]=n[e]}},{kind:"get",static:!0,key:"styles",value:function(){return(0,s.iv)(v||(v=b`:host{fill:currentcolor}`))}}]}}),s.oi)},7285:function(t,e,i){i.d(e,{M:function(){return f}});var n=i(61701),a=i(72621),s=(i(71695),i(47021),i(65703)),r=i(46289),o=i(57243),c=i(50778);let l,d,u,h=t=>t,f=(0,n.Z)([(0,c.Mo)("ha-list-item")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"method",key:"renderRipple",value:function(){return this.noninteractive?"":(0,a.Z)(i,"renderRipple",this,3)([])}},{kind:"get",static:!0,key:"styles",value:function(){return[r.W,(0,o.iv)(l||(l=h`:host{padding-left:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-inline-start:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-right:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px));padding-inline-end:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px))}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:48px}span.material-icons:first-of-type{margin-inline-start:0px!important;margin-inline-end:var(--mdc-list-item-graphic-margin,16px)!important;direction:var(--direction)!important}span.material-icons:last-of-type{margin-inline-start:auto!important;margin-inline-end:0px!important;direction:var(--direction)!important}.mdc-deprecated-list-item__meta{display:var(--mdc-list-item-meta-display);align-items:center;flex-shrink:0}:host([graphic=icon]:not([twoline])) .mdc-deprecated-list-item__graphic{margin-inline-end:var(--mdc-list-item-graphic-margin,20px)!important}:host([multiline-secondary]){height:auto}:host([multiline-secondary]) .mdc-deprecated-list-item__text{padding:8px 0}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text{text-overflow:initial;white-space:normal;overflow:auto;display:inline-block;margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text{margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text::before{display:none}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text::before{display:none}:host([disabled]){color:var(--disabled-text-color)}:host([noninteractive]){pointer-events:unset}`)),"rtl"===document.dir?(0,o.iv)(d||(d=h`span.material-icons:first-of-type,span.material-icons:last-of-type{direction:rtl!important;--direction:rtl}`)):(0,o.iv)(u||(u=h``))]}}]}}),s.K)},43344:function(t,e,i){var n=i(61701),a=i(72621),s=(i(52247),i(71695),i(47021),i(57243)),r=i(50778),o=i(36522),c=i(83716);i(23334);let l,d,u,h=t=>t;(0,n.Z)([(0,r.Mo)("ha-menu-button")],(function(t,e){class i extends e{constructor(...e){super(...e),t(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"hassio",value(){return!1}},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"narrow",value(){return!1}},{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.SB)()],key:"_hasNotifications",value(){return!1}},{kind:"field",decorators:[(0,r.SB)()],key:"_show",value(){return!1}},{kind:"field",key:"_alwaysVisible",value(){return!1}},{kind:"field",key:"_attachNotifOnConnect",value(){return!1}},{kind:"field",key:"_unsubNotifications",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,a.Z)(i,"connectedCallback",this,3)([]),this._attachNotifOnConnect&&(this._attachNotifOnConnect=!1,this._subscribeNotifications())}},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.Z)(i,"disconnectedCallback",this,3)([]),this._unsubNotifications&&(this._attachNotifOnConnect=!0,this._unsubNotifications(),this._unsubNotifications=void 0)}},{kind:"method",key:"render",value:function(){if(!this._show)return s.Ld;const t=this._hasNotifications&&(this.narrow||"always_hidden"===this.hass.dockedSidebar);return(0,s.dy)(l||(l=h` <ha-icon-button .label="${0}" .path="${0}" @click="${0}"></ha-icon-button> ${0} `),this.hass.localize("ui.sidebar.sidebar_toggle"),"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",this._toggleMenu,t?(0,s.dy)(d||(d=h`<div class="dot"></div>`)):"")}},{kind:"method",key:"firstUpdated",value:function(t){(0,a.Z)(i,"firstUpdated",this,3)([t]),this.hassio&&(this._alwaysVisible=(Number(window.parent.frontendVersion)||0)<20190710)}},{kind:"method",key:"willUpdate",value:function(t){if((0,a.Z)(i,"willUpdate",this,3)([t]),!t.has("narrow")&&!t.has("hass"))return;const e=t.has("hass")?t.get("hass"):this.hass,n=(t.has("narrow")?t.get("narrow"):this.narrow)||"always_hidden"===(null==e?void 0:e.dockedSidebar),s=this.narrow||"always_hidden"===this.hass.dockedSidebar;this.hasUpdated&&n===s||(this._show=s||this._alwaysVisible,s?this._subscribeNotifications():this._unsubNotifications&&(this._unsubNotifications(),this._unsubNotifications=void 0))}},{kind:"method",key:"_subscribeNotifications",value:function(){if(this._unsubNotifications)throw new Error("Already subscribed");this._unsubNotifications=(0,c.r)(this.hass.connection,(t=>{this._hasNotifications=t.length>0}))}},{kind:"method",key:"_toggleMenu",value:function(){(0,o.B)(this,"hass-toggle-menu")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,s.iv)(u||(u=h`:host{position:relative}.dot{pointer-events:none;position:absolute;background-color:var(--accent-color);width:12px;height:12px;top:9px;right:7px;inset-inline-end:7px;inset-inline-start:initial;border-radius:50%;border:2px solid var(--app-header-background-color)}`))}}]}}),s.oi)},51223:function(t,e,i){i.a(t,(async function(t,e){try{var n=i(61701),a=(i(71695),i(47021),i(57243)),s=i(50778),r=i(94571),o=i(59847),c=i(45729),l=(i(65981),i(37583),t([c]));c=(l.then?(await l)():l)[0];let d,u,h,f,m=t=>t;(0,n.Z)([(0,s.Mo)("ha-state-icon")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"stateObj",value:void 0},{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"stateValue",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"icon",value:void 0},{kind:"method",key:"render",value:function(){var t,e;const i=this.icon||this.stateObj&&(null===(t=this.hass)||void 0===t||null===(t=t.entities[this.stateObj.entity_id])||void 0===t?void 0:t.icon)||(null===(e=this.stateObj)||void 0===e?void 0:e.attributes.icon);if(i)return(0,a.dy)(d||(d=m`<ha-icon .icon="${0}"></ha-icon>`),i);if(!this.stateObj)return a.Ld;if(!this.hass)return this._renderFallback();const n=(0,c.gD)(this.hass,this.stateObj,this.stateValue).then((t=>t?(0,a.dy)(u||(u=m`<ha-icon .icon="${0}"></ha-icon>`),t):this._renderFallback()));return(0,a.dy)(h||(h=m`${0}`),(0,r.C)(n))}},{kind:"method",key:"_renderFallback",value:function(){const t=(0,o.N)(this.stateObj);return(0,a.dy)(f||(f=m` <ha-svg-icon .path="${0}"></ha-svg-icon> `),c.Ls[t]||c.Rb)}}]}}),a.oi);e()}catch(d){e(d)}}))},85366:function(t,e,i){var n=i(61701),a=(i(71695),i(47021),i(82238)),s=i(66575),r=i(57243),o=i(50778);let c,l=t=>t;(0,n.Z)([(0,o.Mo)("ha-top-app-bar-fixed")],(function(t,e){return{F:class extends e{constructor(...e){super(...e),t(this)}},d:[{kind:"field",static:!0,key:"styles",value(){return[s.W,(0,r.iv)(c||(c=l`.mdc-top-app-bar__row{height:var(--header-height);border-bottom:var(--app-header-border-bottom)}.mdc-top-app-bar--fixed-adjust{padding-top:var(--header-height)}.mdc-top-app-bar{--mdc-typography-headline6-font-weight:400;color:var(--app-header-text-color,var(--mdc-theme-on-primary,#fff));background-color:var(--app-header-background-color,var(--mdc-theme-primary))}.mdc-top-app-bar__title{padding-inline-start:24px;padding-inline-end:initial}`))]}}]}}),a.s)},43546:function(t,e,i){i.d(e,{Cp:function(){return r},TZ:function(){return o},W2:function(){return s},YY:function(){return l},iI:function(){return a},j2:function(){return c},oT:function(){return n}});i(19083),i(77439),i(19423),i(40251),i(97499),i(61006),i(13334);const n=t=>t.map((t=>{if("string"!==t.type)return t;switch(t.name){case"username":return Object.assign(Object.assign({},t),{},{autocomplete:"username",autofocus:!0});case"password":return Object.assign(Object.assign({},t),{},{autocomplete:"current-password"});case"code":return Object.assign(Object.assign({},t),{},{autocomplete:"one-time-code",autofocus:!0});default:return t}})),a=(t,e)=>t.callWS({type:"auth/sign_path",path:e}),s=async(t,e,i,n)=>t.callWS({type:"config/auth_provider/homeassistant/create",user_id:e,username:i,password:n}),r=(t,e,i)=>t.callWS({type:"config/auth_provider/homeassistant/change_password",current_password:e,new_password:i}),o=(t,e,i)=>t.callWS({type:"config/auth_provider/homeassistant/admin_change_password",user_id:e,password:i}),c=(t,e,i)=>t.callWS({type:"config/auth_provider/homeassistant/admin_change_username",user_id:e,username:i}),l=(t,e,i)=>t.callWS({type:"auth/delete_all_refresh_tokens",token_type:e,delete_current_token:i})},80654:function(t,e,i){i.d(e,{g:()=>r});const n=window;"customIconsets"in n||(n.customIconsets={});const a=n.customIconsets,s=window;"customIcons"in s||(s.customIcons={});const r=new Proxy(s.customIcons,{get:(t,e)=>{var i;return null!==(i=t[e])&&void 0!==i?i:a[e]?{getIcon:a[e]}:void 0}})},96194:function(t,e,i){i.d(e,{ON:function(){return r},PX:function(){return o},V_:function(){return c},lz:function(){return s},nZ:function(){return a},rk:function(){return d}});var n=i(92636);const a="unavailable",s="unknown",r="on",o="off",c=[a,s],l=[a,s,o],d=(0,n.z)(c);(0,n.z)(l)},48977:function(t,e,i){function n(t){return"strategy"in t}i.d(e,{Oh:function(){return s},Q2:function(){return a},Tx:function(){return n},vj:function(){return r}});const a=(t,e,i)=>t.sendMessagePromise({type:"lovelace/config",url_path:e,force:i}),s=(t,e,i)=>t.callWS({type:"lovelace/config/save",url_path:e,config:i}),r=(t,e)=>t.callWS({type:"lovelace/config/delete",url_path:e})},6649:function(t,e,i){i.d(e,{JR:function(){return a},Y:function(){return s},iM:function(){return r},j2:function(){return n}});i(19423);const n=t=>t.callWS({type:"lovelace/dashboards/list"}),a=(t,e)=>t.callWS(Object.assign({type:"lovelace/dashboards/create"},e)),s=(t,e,i)=>t.callWS(Object.assign({type:"lovelace/dashboards/update",dashboard_id:e},i)),r=(t,e)=>t.callWS({type:"lovelace/dashboards/delete",dashboard_id:e})},83716:function(t,e,i){i.d(e,{r:function(){return n}});i(71695),i(19423),i(47021);const n=(t,e)=>{const i=new a,n=t.subscribeMessage((t=>e(i.processMessage(t))),{type:"persistent_notification/subscribe"});return()=>{n.then((t=>null==t?void 0:t()))}};class a{constructor(){this.notifications=void 0,this.notifications={}}processMessage(t){if("removed"===t.type)for(const e of Object.keys(t.notifications))delete this.notifications[e];else this.notifications=Object.assign(Object.assign({},this.notifications),t.notifications);return Object.values(this.notifications)}}},41063:function(t,e,i){i.d(e,{CM:function(){return b},QQ:function(){return _},aV:function(){return m},bq:function(){return w},c9:function(){return k},dh:function(){return C},lE:function(){return y},lV:function(){return v},o1:function(){return u},qJ:function(){return p},qR:function(){return h},vI:function(){return g},xO:function(){return f}});var n=i(58814),a=(i(60933),i(19083),i(71695),i(92745),i(32126),i(19423),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(61006),i(39527),i(99790),i(34810),i(41360),i(36993),i(47021),i(95262)),s=i(59847),r=i(75278),o=i(96530),c=i(71857);const l=["domain","integration","device_class"],d=["integration","manufacturer","model"],u=(t,e,i,n,a,s,r)=>{const o=[],c=[],l=[];return Object.values(i).forEach((i=>{i.labels.includes(e)&&g(t,a,n,i.area_id,s,r)&&l.push(i.area_id)})),Object.values(n).forEach((i=>{i.labels.includes(e)&&p(t,Object.values(a),i,s,r)&&c.push(i.id)})),Object.values(a).forEach((i=>{i.labels.includes(e)&&_(t.states[i.entity_id],s,r)&&o.push(i.entity_id)})),{areas:l,devices:c,entities:o}},h=(t,e,i,n,a)=>{const s=[];return Object.values(i).forEach((i=>{i.floor_id===e&&g(t,t.entities,t.devices,i.area_id,n,a)&&s.push(i.area_id)})),{areas:s}},f=(t,e,i,n,a,s)=>{const r=[],o=[];return Object.values(i).forEach((i=>{i.area_id===e&&p(t,Object.values(n),i,a,s)&&o.push(i.id)})),Object.values(n).forEach((i=>{i.area_id===e&&_(t.states[i.entity_id],a,s)&&r.push(i.entity_id)})),{devices:o,entities:r}},m=(t,e,i,n,a)=>{const s=[];return Object.values(i).forEach((i=>{i.device_id===e&&_(t.states[i.entity_id],n,a)&&s.push(i.entity_id)})),{entities:s}},g=(t,e,i,n,a,s)=>!!Object.values(i).some((i=>!(i.area_id!==n||!p(t,Object.values(e),i,a,s))))||Object.values(e).some((e=>!(e.area_id!==n||!_(t.states[e.entity_id],a,s)))),p=(t,e,i,n,s)=>{var r,o;const l=s?(0,c.HP)(s,e):void 0;if(null!==(r=n.target)&&void 0!==r&&r.device&&!(0,a.r)(n.target.device).some((t=>y(t,i,l))))return!1;if(null!==(o=n.target)&&void 0!==o&&o.entity){return e.filter((t=>t.device_id===i.id)).some((e=>{const i=t.states[e.entity_id];return _(i,n,s)}))}return!0},_=(t,e,i)=>{var n;return null===(n=e.target)||void 0===n||!n.entity||(0,a.r)(e.target.entity).some((e=>v(e,t,i)))},y=(t,e,i)=>{const{manufacturer:n,model:a,integration:s}=t;if(n&&e.manufacturer!==n)return!1;if(a&&e.model!==a)return!1;var r;if(s&&i&&(null==i||null===(r=i[e.id])||void 0===r||!r.has(s)))return!1;return!0},v=(t,e,i)=>{var n;const{domain:o,device_class:c,supported_features:l,integration:d}=t;if(o){const t=(0,s.N)(e);if(Array.isArray(o)?!o.includes(t):t!==o)return!1}if(c){const t=e.attributes.device_class;if(t&&Array.isArray(c)?!c.includes(t):t!==c)return!1}return!(l&&!(0,a.r)(l).some((t=>(0,r.e)(e,t))))&&(!d||(null==i||null===(n=i[e.entity_id])||void 0===n?void 0:n.domain)===d)},b=t=>{if(!t.entity)return{entity:null};if("filter"in t.entity)return t;const e=t.entity,{domain:i,integration:a,device_class:s}=e,r=(0,n.Z)(e,l);return i||a||s?{entity:Object.assign(Object.assign({},r),{},{filter:{domain:i,integration:a,device_class:s}})}:{entity:r}},k=t=>{if(!t.device)return{device:null};if("filter"in t.device)return t;const e=t.device,{integration:i,manufacturer:a,model:s}=e,r=(0,n.Z)(e,d);return i||a||s?{device:Object.assign(Object.assign({},r),{},{filter:{integration:i,manufacturer:a,model:s}})}:{device:r}},w=t=>{let e;var i;if("target"in t)e=(0,a.r)(null===(i=t.target)||void 0===i?void 0:i.entity);else if("entity"in t){var n,s;if(null!==(n=t.entity)&&void 0!==n&&n.include_entities)return;e=(0,a.r)(null===(s=t.entity)||void 0===s?void 0:s.filter)}if(!e)return;const r=e.flatMap((t=>t.integration||t.device_class||t.supported_features||!t.domain?[]:(0,a.r)(t.domain).filter((t=>(0,o.X)(t)))));return[...new Set(r)]},C=(t,e,i,n,s)=>{if(!e)return[];const r={target:{}},o=new Set((0,a.r)(e.entity_id)),c=new Set((0,a.r)(e.device_id)),l=new Set((0,a.r)(e.area_id)),d=new Set((0,a.r)(e.floor_id));return new Set((0,a.r)(e.label_id)).forEach((e=>{const a=u(t,e,s,n,i,r);a.devices.forEach((t=>c.add(t))),a.entities.forEach((t=>o.add(t))),a.areas.forEach((t=>l.add(t)))})),d.forEach((e=>{h(t,e,s,r).areas.forEach((t=>l.add(t)))})),l.forEach((e=>{const a=f(t,e,n,i,r);a.devices.forEach((t=>c.add(t))),a.entities.forEach((t=>o.add(t)))})),c.forEach((e=>{m(t,e,i,r).entities.forEach((t=>o.add(t)))})),Array.from(o)}},69919:function(t,e,i){i.a(t,(async function(t,n){try{i.d(e,{EX:function(){return f},Fj:function(){return v},M$:function(){return b},SO:function(){return m},Sk:function(){return p},UJ:function(){return _},Ym:function(){return k},hF:function(){return g}});i(61893),i(40251),i(39527),i(99790),i(13334);var a=i(73358),s=i(73850),r=i(59847),o=i(75278),c=i(50602),l=i(1416),d=i(76131),u=i(72473),h=t([c]);c=(h.then?(await h)():h)[0];let f=function(t){return t[t.INSTALL=1]="INSTALL",t[t.SPECIFIC_VERSION=2]="SPECIFIC_VERSION",t[t.PROGRESS=4]="PROGRESS",t[t.BACKUP=8]="BACKUP",t[t.RELEASE_NOTES=16]="RELEASE_NOTES",t}({});const m=t=>(0,o.e)(t,f.PROGRESS)&&null!==t.attributes.update_percentage,g=(t,e=!1)=>(t.state===a.uo||e&&Boolean(t.attributes.skipped_version))&&(0,o.e)(t,f.INSTALL),p=t=>!!t.attributes.in_progress,_=(t,e)=>t.callWS({type:"update/release_notes",entity_id:e}),y=(t,e)=>Object.values(t).filter((t=>"update"===(0,r.N)(t))).sort(((t,i)=>"Home Assistant Core"===t.attributes.title?-3:"Home Assistant Core"===i.attributes.title?3:"Home Assistant Operating System"===t.attributes.title?-2:"Home Assistant Operating System"===i.attributes.title?2:"Home Assistant Supervisor"===t.attributes.title?-1:"Home Assistant Supervisor"===i.attributes.title?1:(0,l.f)(t.attributes.title||t.attributes.friendly_name||"",i.attributes.title||i.attributes.friendly_name||"",e))),v=(t,e=!1)=>y(t).filter((t=>g(t,e))),b=async(t,e)=>{const i=y(e.states,e.locale.language).map((t=>t.entity_id));if(!i.length)return void(0,d.showAlertDialog)(t,{title:e.localize("ui.panel.config.updates.no_update_entities.title"),text:e.localize("ui.panel.config.updates.no_update_entities.description"),warning:!0});(0,u.C)(t,{message:e.localize("ui.panel.config.updates.checking_updates")});let n=0;const a=await e.connection.subscribeEvents((i=>{"update"===(0,s.M)(i.data.entity_id)&&(n++,(0,u.C)(t,{message:e.localize("ui.panel.config.updates.updates_refreshed",{count:n})}))}),"state_changed");await e.callService("homeassistant","update_entity",{entity_id:i}),await new Promise((t=>{setTimeout(t,15e3)})),a(),0===n&&(0,u.C)(t,{message:e.localize("ui.panel.config.updates.no_new_updates")})},k=(t,e)=>{const i=t.state,n=t.attributes;if("off"===i){return n.latest_version&&n.skipped_version===n.latest_version?n.latest_version:e.formatEntityState(t)}if("on"===i&&p(t)){return(0,o.e)(t,f.PROGRESS)&&null!==n.update_percentage?e.localize("ui.card.update.installing_with_progress",{progress:(0,c.uf)(n.update_percentage,e.locale,{maximumFractionDigits:n.display_precision,minimumFractionDigits:n.display_precision})}):e.localize("ui.card.update.installing")}return e.formatEntityState(t)};n()}catch(f){n(f)}}))},96530:function(t,e,i){i.d(e,{X:function(){return s},y:function(){return a}});var n=i(92636);const a=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer","schedule"],s=(0,n.z)(a)},99135:function(t,e,i){i.a(t,(async function(t,n){try{i.r(e);var a=i(61701),s=i(72621),r=(i(71695),i(92745),i(61893),i(19423),i(40251),i(19134),i(5740),i(11740),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(97003),i(69797),i(39527),i(67670),i(41360),i(13334),i(47021),i(72700),i(8038),i(71513),i(75656),i(50100),i(18084),i(13633)),o=i(57243),c=i(50778),l=i(27486),d=i(95262),u=i(68958),h=i(73850),f=i(83523),m=i(35830),g=i(58776),p=i(29937),_=i(71489),y=(i(97206),i(12667)),v=(i(23334),i(34273),i(7285),i(54202),i(43344),i(37432)),b=(i(85366),i(6280)),k=i(17705),w=i(41063),C=i(96309),S=i(76131),$=i(28008),x=i(58014),D=i(69615),I=t([_,y,v,b]);[_,y,v,b]=I.then?(await I)():I;let O,z,L,P,T,N,H,j,E=t=>t;const Z="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",V="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",A="M14.76,20.83L17.6,18L14.76,15.17L16.17,13.76L19,16.57L21.83,13.76L23.24,15.17L20.43,18L23.24,20.83L21.83,22.24L19,19.4L16.17,22.24L14.76,20.83M12,12V19.88C12.04,20.18 11.94,20.5 11.71,20.71C11.32,21.1 10.69,21.1 10.3,20.71L8.29,18.7C8.06,18.47 7.96,18.16 8,17.87V12H7.97L2.21,4.62C1.87,4.19 1.95,3.56 2.38,3.22C2.57,3.08 2.78,3 3,3V3H17V3C17.22,3 17.43,3.08 17.62,3.22C18.05,3.56 18.13,4.19 17.79,4.62L12.03,12H12Z",F="M18 15V18H15V20H18V23H20V20H23V18H20V15H18M13.3 21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H19C20.1 3 21 3.9 21 5V13.3C20.4 13.1 19.7 13 19 13C17.9 13 16.8 13.3 15.9 13.9L14.5 12L11 16.5L8.5 13.5L5 18H13.1C13 18.3 13 18.7 13 19C13 19.7 13.1 20.4 13.3 21Z";let M=(0,a.Z)(null,(function(t,e){class i extends e{constructor(){super(),t(this);const e=new Date;e.setHours(e.getHours()-1,0,0,0),this._startDate=e;const i=new Date;i.setHours(i.getHours()+2,0,0,0),this._endDate=i}}return{F:i,d:[{kind:"field",decorators:[(0,c.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,c.Cb)({reflect:!0,type:Boolean})],key:"narrow",value(){return!1}},{kind:"field",decorators:[(0,c.Cb)({reflect:!0,type:Boolean})],key:"rtl",value(){return!1}},{kind:"field",decorators:[(0,c.SB)()],key:"_startDate",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_endDate",value:void 0},{kind:"field",decorators:[(0,u.t)({key:"historyPickedValue",state:!0,subscribe:!1})],key:"_targetPickerValue",value(){return{}}},{kind:"field",decorators:[(0,c.SB)()],key:"_isLoading",value(){return!1}},{kind:"field",decorators:[(0,c.SB)()],key:"_stateHistory",value:void 0},{kind:"field",key:"_mungedStateHistory",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_statisticsHistory",value:void 0},{kind:"field",decorators:[(0,c.SB)()],key:"_showBack",value:void 0},{kind:"field",decorators:[(0,c.IO)("state-history-charts")],key:"_stateHistoryCharts",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,s.Z)(i,"connectedCallback",this,3)([]),this.hasUpdated&&this._getHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,s.Z)(i,"disconnectedCallback",this,3)([]),this._unsubscribeHistory()}},{kind:"method",key:"_goBack",value:function(){history.back()}},{kind:"method",key:"render",value:function(){const t=this._getEntityIds().length>0;return(0,o.dy)(O||(O=E` <ha-top-app-bar-fixed> ${0} <div slot="title">${0}</div> ${0} <ha-button-menu slot="actionItems" @action="${0}"> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> <ha-list-item graphic="icon" .disabled="${0}"> ${0} <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> </ha-list-item> <ha-list-item graphic="icon" .disabled="${0}"> ${0} <ha-svg-icon slot="graphic" .path="${0}"></ha-svg-icon> </ha-list-item> </ha-button-menu> <div class="flex content"> <div class="filters"> <ha-date-range-picker .hass="${0}" ?disabled="${0}" .startDate="${0}" .endDate="${0}" extended-presets @change="${0}"></ha-date-range-picker> <ha-target-picker .hass="${0}" .value="${0}" .disabled="${0}" add-on-top @value-changed="${0}"></ha-target-picker> </div> ${0} </div> </ha-top-app-bar-fixed> `),this._showBack?(0,o.dy)(z||(z=E` <ha-icon-button-arrow-prev slot="navigationIcon" @click="${0}"></ha-icon-button-arrow-prev> `),this._goBack):(0,o.dy)(L||(L=E` <ha-menu-button slot="navigationIcon" .hass="${0}" .narrow="${0}"></ha-menu-button> `),this.hass,this.narrow),this.hass.localize("panel.history"),t?(0,o.dy)(P||(P=E` <ha-icon-button slot="actionItems" @click="${0}" .disabled="${0}" .path="${0}" .label="${0}"></ha-icon-button> `),this._removeAll,this._isLoading,A,this.hass.localize("ui.panel.history.remove_all")):"",this._handleMenuAction,this.hass.localize("ui.common.menu"),Z,this._isLoading,this.hass.localize("ui.panel.history.download_data"),V,this._isLoading,this.hass.localize("ui.panel.history.add_card"),F,this.hass,this._isLoading,this._startDate,this._endDate,this._dateRangeChanged,this.hass,this._targetPickerValue,this._isLoading,this._targetsChanged,this._isLoading?(0,o.dy)(T||(T=E`<div class="progress-wrapper"> <ha-circular-progress indeterminate></ha-circular-progress> </div>`)):t?(0,o.dy)(H||(H=E` <state-history-charts .hass="${0}" .historyData="${0}" .startTime="${0}" .endTime="${0}"> </state-history-charts> `),this.hass,this._mungedStateHistory,this._startDate,this._endDate):(0,o.dy)(N||(N=E`<div class="start-search"> ${0} </div>`),this.hass.localize("ui.panel.history.start_search")))}},{kind:"method",key:"_mergeHistoryResults",value:function(t,e){const i=Object.assign(Object.assign({},e),{},{line:[]}),n={};for(const s of e.line){const t=(0,b.xj)(s.unit,s.device_class,!0);t&&(n[t]={historyItem:s})}for(const s of t.line){const t=(0,b.xj)(s.unit,s.device_class,!0);t&&(t in n?n[t].ltsItem=s:n[t]={ltsItem:s})}for(const{historyItem:s,ltsItem:r}of Object.values(n)){if(!s||!r){i.line.push(s||r);continue}const t=Object.assign(Object.assign({},s),{},{data:[]}),e=new Set([...s.data.map((t=>t.entity_id)),...r.data.map((t=>t.entity_id))]);for(const i of e){var a;const e=s.data.find((t=>t.entity_id===i)),n=r.data.find((t=>t.entity_id===i));if(!e||!n){t.data.push(e||n);continue}const o=(null===(a=e.states[0])||void 0===a?void 0:a.last_changed)||n.statistics[n.statistics.length-1].last_changed+1,c=[];for(const t of n.statistics){if(t.last_changed>=o)break;c.push(t)}t.data.push(0===c.length?e:Object.assign(Object.assign({},e),{},{statistics:c}))}i.line.push(t)}return i}},{kind:"method",key:"willUpdate",value:function(t){if((0,s.Z)(i,"willUpdate",this,3)([t]),(t.has("_stateHistory")||t.has("_statisticsHistory")||t.has("_startDate")||t.has("_endDate")||t.has("_targetPickerValue"))&&(this._statisticsHistory&&this._stateHistory?this._mungedStateHistory=this._mergeHistoryResults(this._statisticsHistory,this._stateHistory):this._mungedStateHistory=this._stateHistory||this._statisticsHistory),this.hasUpdated)return;const e=(0,g.Q2)(),n=e.entity_id,a=e.device_id,r=e.area_id,o=e.floor_id,c=e.label_id;if((n||a||r||o||c)&&(this._targetPickerValue={}),n){const t=n.split(",");this._targetPickerValue.entity_id=t}if(a){const t=a.split(",");this._targetPickerValue.device_id=t}if(r){const t=r.split(",");this._targetPickerValue.area_id=t}if(o){const t=o.split(",");this._targetPickerValue.floor_id=t}if(c){const t=c.split(",");this._targetPickerValue.label_id=t}const l=e.start_date;l&&(this._startDate=new Date(l));const d=e.end_date;d&&(this._endDate=new Date(d))}},{kind:"method",key:"firstUpdated",value:function(t){(0,s.Z)(i,"firstUpdated",this,3)([t]);"1"===(0,g.Q2)().back&&history.length>1&&(this._showBack=!0,(0,f.c)((0,m.q)((0,g.pc)("back")),{replace:!0}))}},{kind:"method",key:"updated",value:function(t){(t.has("_startDate")||t.has("_endDate")||t.has("_targetPickerValue")||!this._stateHistory&&(t.has("_deviceEntityLookup")||t.has("_areaEntityLookup")||t.has("_areaDeviceLookup")))&&(this._getHistory(),this._getStats())}},{kind:"method",key:"_removeAll",value:function(){this._targetPickerValue={},this._updatePath()}},{kind:"method",key:"_getStats",value:async function(){var t;const e=this._getEntityIds();if(0===e.length)return void(this._statisticsHistory=void 0);const i=await(0,k.dL)(this.hass,this._startDate,this._endDate,e,"hour",void 0,["mean","state"]),n={};e.forEach((t=>{t in i&&(n[t]=i[t])}));const a={};Object.entries(n).forEach((([t,e])=>{const i=e.map((t=>({s:null!=t.mean?t.mean.toString():t.state.toString(),lc:t.start/1e3,a:{},lu:t.start/1e3})));a[t]=i}));const{numeric_device_classes:s}=await(0,C.ib)(this.hass);this._statisticsHistory=(0,b.Nu)(this.hass,a,[],this.hass.localize,s,!0,!0),((null===(t=this._statisticsHistory)||void 0===t?void 0:t.line)||[]).forEach((t=>{t.data.forEach((t=>{t.statistics=t.states,t.states=[]}))}))}},{kind:"method",key:"_getHistory",value:async function(){const t=this._getEntityIds();if(0===t.length)return void(this._stateHistory=void 0);this._isLoading=!0,this._subscribed&&this._unsubscribeHistory();const e=new Date,{numeric_device_classes:i}=await(0,C.ib)(this.hass);this._subscribed=(0,b.Vk)(this.hass,(e=>{this._isLoading=!1,this._stateHistory=(0,b.Nu)(this.hass,e,t,this.hass.localize,i,!0)}),this._startDate,this._endDate,t),this._subscribed.catch((()=>{this._isLoading=!1,this._unsubscribeHistory()})),this._endDate>e&&this._setRedrawTimer()}},{kind:"method",key:"_setRedrawTimer",value:function(){clearInterval(this._interval);const t=new Date,e=this._endDate>t?t:this._endDate,i=(0,r.A)(e,this._startDate);this._interval=window.setInterval((()=>{var t;return null===(t=this._stateHistoryCharts)||void 0===t?void 0:t.requestUpdate()}),i<2?1e4:i<10?6e4:p.Q)}},{kind:"method",key:"_unsubscribeHistory",value:function(){this._interval&&(clearInterval(this._interval),this._interval=void 0),this._subscribed&&(this._subscribed.then((t=>null==t?void 0:t())),this._subscribed=void 0)}},{kind:"method",key:"_getEntityIds",value:function(){return this.__getEntityIds(this._targetPickerValue,this.hass.entities,this.hass.devices,this.hass.areas)}},{kind:"field",key:"__getEntityIds",value(){return(0,l.Z)(((t,e,i,n)=>(0,w.dh)(this.hass,t,e,i,n)))}},{kind:"method",key:"_dateRangeChanged",value:function(t){this._startDate=t.detail.startDate;const e=t.detail.endDate;0===e.getHours()&&0===e.getMinutes()&&(e.setDate(e.getDate()+1),e.setMilliseconds(e.getMilliseconds()-1)),this._endDate=e,this._updatePath()}},{kind:"method",key:"_targetsChanged",value:function(t){this._targetPickerValue=t.detail.value||{},this._updatePath()}},{kind:"method",key:"_updatePath",value:function(){const t={};this._targetPickerValue.entity_id&&(t.entity_id=(0,d.r)(this._targetPickerValue.entity_id).join(",")),this._targetPickerValue.label_id&&(t.label_id=(0,d.r)(this._targetPickerValue.label_id).join(",")),this._targetPickerValue.floor_id&&(t.floor_id=(0,d.r)(this._targetPickerValue.floor_id).join(",")),this._targetPickerValue.area_id&&(t.area_id=(0,d.r)(this._targetPickerValue.area_id).join(",")),this._targetPickerValue.device_id&&(t.device_id=(0,d.r)(this._targetPickerValue.device_id).join(",")),this._startDate&&(t.start_date=this._startDate.toISOString()),this._endDate&&(t.end_date=this._endDate.toISOString()),(0,f.c)(`/history?${(0,g.ou)(t)}`,{replace:!0})}},{kind:"method",key:"_handleMenuAction",value:async function(t){switch(t.detail.index){case 0:this._downloadHistory();break;case 1:this._suggestCard()}}},{kind:"method",key:"_downloadHistory",value:function(){if(0===[...this._getEntityIds()].sort().length||!this._mungedStateHistory)return void(0,S.showAlertDialog)(this,{title:this.hass.localize("ui.panel.history.download_data_error"),text:this.hass.localize("ui.panel.history.error_no_data"),warning:!0});const t=[""],e=["entity_id","state","last_changed"],i=new Set,n={climate:{current_temperature:0,hvac_action:0,target_temp_high:0,target_temp_low:0,temperature:0},humidifier:{action:0,current_humidity:0,humidity:0},water_heater:{current_temperature:0,operation_mode:0,temperature:0}},a=t=>new Date(t).toISOString();for(const o of this._mungedStateHistory.line)for(const s of o.data){const r=s.entity_id,o=(0,h.M)(r),c=n[o];if(c&&!i.has(o)){i.add(o);let t=e.length;for(const i of Object.keys(c))e.push(i),c[i]=t,t+=1}if(s.statistics)for(const e of s.statistics)t.push(`${r},${e.state},${a(e.last_changed)}\n`);for(const e of s.states){const i=a(e.last_changed),n=[r,e.state,i];if(e.attributes&&c){const t=e.attributes;for(const[e,i]of Object.entries(c))e in t&&(n[i]=t[e])}t.push(n.join(",")+"\n")}}for(const o of this._mungedStateHistory.timeline){const e=o.entity_id;for(const i of o.data){const n=/,|"/.test(i.state)?`"${i.state.replaceAll('"','""')}"`:i.state;t.push(`${e},${n},${a(i.last_changed)}\n`)}}t[0]=e.join(",")+"\n";const s=new Blob(t,{type:"text/csv"}),r=window.URL.createObjectURL(s);(0,x.N)(r,"history.csv")}},{kind:"method",key:"_suggestCard",value:function(){const t=this._getEntityIds();if(0===t.length||!this._mungedStateHistory)return void(0,S.showAlertDialog)(this,{title:this.hass.localize("ui.panel.history.add_card_error"),text:this.hass.localize("ui.panel.history.error_no_data"),warning:!0});const e=Math.min(this._endDate.getTime(),Date.now()),i=[{title:this.hass.localize("panel.history"),type:"history-graph",hours_to_show:Math.round((e-this._startDate.getTime())/1e3/60/60),entities:t}];(0,D.$)(this,this.hass,i,{title:this.hass.localize("panel.history"),cards:i},t)}},{kind:"get",static:!0,key:"styles",value:function(){return[$.Qx,(0,o.iv)(j||(j=E`.content{padding:0 16px 16px;padding-bottom:max(env(safe-area-inset-bottom),16px)}:host([virtualize]){height:100%}.progress-wrapper{position:relative;display:flex;align-items:center;flex-direction:column;padding:16px}.filters{display:flex;align-items:flex-start;margin-top:16px}ha-date-range-picker{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;max-width:100%;direction:var(--direction)}@media all and (max-width:1025px){.filters{flex-direction:column}ha-date-range-picker{width:100%;margin-bottom:8px}}.start-search{padding-top:16px;text-align:center;color:var(--secondary-text-color)}`))]}}]}}),o.oi);customElements.define("ha-panel-history",M),n()}catch(O){n(O)}}))},69615:function(t,e,i){i.d(e,{$:function(){return c}});i(71695),i(40251),i(39527),i(99790),i(47021);var n=i(48977),a=i(6649),s=i(76131),r=i(53380),o=i(74941);const c=async(t,e,i,c,l)=>{var d,u;e.loadFragmentTranslation("lovelace");const h=await(0,a.j2)(e),f=h.filter((t=>"storage"===t.mode)),m=null===(d=e.panels.lovelace)||void 0===d||null===(d=d.config)||void 0===d?void 0:d.mode;if("storage"!==m&&!f.length)return void(0,r.f)(t,{cardConfig:i,entities:l,yaml:!0});let g,p=null;if("storage"===m)try{g=await(0,n.Q2)(e.connection,null,!1)}catch(_){}if(!g&&f.length)for(const a of f)try{g=await(0,n.Q2)(e.connection,a.url_path,!1),p=a.url_path;break}catch(_){}g?f.length||null!==(u=g.views)&&void 0!==u&&u.length?f.length||1!==g.views.length?(0,o.i)(t,{lovelaceConfig:g,urlPath:p,allowDashboardChange:!0,actionLabel:e.localize("ui.common.next"),dashboards:h,viewSelectedCallback:(a,s,o)=>{(0,r.f)(t,{cardConfig:i,sectionConfig:c,lovelaceConfig:s,saveConfig:async t=>{try{await(0,n.Oh)(e,a,t)}catch(i){alert(e.localize("ui.panel.lovelace.add_entities.saving_failed"))}},path:[o],entities:l})}}):(0,r.f)(t,{cardConfig:i,sectionConfig:c,lovelaceConfig:g,saveConfig:async t=>{try{await(0,n.Oh)(e,null,t)}catch(_){alert(e.localize("ui.panel.lovelace.add_entities.saving_failed"))}},path:[0],entities:l}):(0,s.showAlertDialog)(t,{text:"You don't have any Lovelace views, first create a view in Lovelace."}):h.length>f.length?(0,r.f)(t,{cardConfig:i,sectionConfig:c,entities:l,yaml:!0}):(0,s.showAlertDialog)(t,{text:"You don't seem to be in control of any dashboard, please take control first."})}},53380:function(t,e,i){i.d(e,{f:function(){return s}});i(71695),i(40251),i(47021);var n=i(36522);const a=()=>Promise.all([i.e("35671"),i.e("42950"),i.e("29570"),i.e("79525"),i.e("40099"),i.e("8795"),i.e("71588"),i.e("92139"),i.e("31408"),i.e("32146"),i.e("45547"),i.e("33420"),i.e("63055"),i.e("70147"),i.e("44251"),i.e("63556"),i.e("1466"),i.e("38326"),i.e("80809"),i.e("70639"),i.e("11088"),i.e("1254"),i.e("11091"),i.e("99108")]).then(i.bind(i,22958)),s=(t,e)=>{(0,n.B)(t,"show-dialog",{dialogTag:"hui-dialog-suggest-card",dialogImport:a,dialogParams:e})}},74941:function(t,e,i){i.d(e,{i:function(){return a}});i(71695),i(40251),i(47021);var n=i(36522);const a=(t,e)=>{(0,n.B)(t,"show-dialog",{dialogTag:"hui-dialog-select-view",dialogImport:()=>Promise.all([i.e("97983"),i.e("41258"),i.e("35671"),i.e("7010"),i.e("5851")]).then(i.bind(i,67271)),dialogParams:e})}},16485:function(t,e,i){i.a(t,(async function(t,e){try{i(71695),i(92745),i(40251),i(47021);var n=i(61449),a=i(40574),s=i(30532),r=i(41674),o=i(49722),c=i(76632),l=i(7884),d=i(35185),u=i(65401),h=i(44180),f=i(49447);const t=async()=>{const t=(0,h.sS)(),e=[];(0,s.shouldPolyfill)()&&await Promise.all([i.e("80210"),i.e("74055")]).then(i.bind(i,98133)),(0,o.shouldPolyfill)()&&await Promise.all([i.e("79525"),i.e("8431"),i.e("80210"),i.e("60251")]).then(i.bind(i,59095)),(0,n.shouldPolyfill)(t)&&e.push(Promise.all([i.e("79525"),i.e("8431"),i.e("68250")]).then(i.bind(i,80561)).then((()=>(0,f.H)()))),(0,u.shouldPolyfill)()&&e.push(Promise.all([i.e("79525"),i.e("8431"),i.e("65578")]).then(i.bind(i,97995))),(0,a.shouldPolyfill)(t)&&e.push(Promise.all([i.e("79525"),i.e("8431"),i.e("59826")]).then(i.bind(i,31514))),(0,r.shouldPolyfill)(t)&&e.push(Promise.all([i.e("79525"),i.e("8431"),i.e("23649")]).then(i.bind(i,93840))),(0,c.shouldPolyfill)(t)&&e.push(Promise.all([i.e("79525"),i.e("8431"),i.e("42831")]).then(i.bind(i,29559))),(0,l.shouldPolyfill)(t)&&e.push(Promise.all([i.e("79525"),i.e("8431"),i.e("57377")]).then(i.bind(i,63848)).then((()=>i.e("61236").then(i.t.bind(i,4121,23))))),(0,d.shouldPolyfill)(t)&&e.push(Promise.all([i.e("79525"),i.e("8431"),i.e("13870")]).then(i.bind(i,74546))),0!==e.length&&await Promise.all(e).then((()=>(0,f.n)(t)))};await t(),e()}catch(m){e(m)}}),1)},31948:function(t,e,i){i.a(t,(async function(t,e){try{i(71695),i(40251),i(47021);"function"!=typeof window.ResizeObserver&&(window.ResizeObserver=(await i.e("73378").then(i.bind(i,88198))).default),e()}catch(n){e(n)}}),1)},58014:function(t,e,i){i.d(e,{N:()=>a,G:()=>s});var n=i("18117");const a=(t,e="")=>{const i=document.createElement("a");i.target="_blank",i.href=t,i.download=e,i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click")),document.body.removeChild(i)},s=t=>{var e;return!(t=>!!t.auth.external&&n.G)(t)||!(null===(e=t.auth.external)||void 0===e||!e.config.downloadFileSupported)}},18117:function(t,e,i){i.d(e,{G:function(){return n}});i(19134),i(5740);const n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},17743:function(t,e,i){var n=i(13053);t.exports=function(t,e,i){for(var a=0,s=arguments.length>2?i:n(e),r=new t(s);s>a;)r[a]=e[a++];return r}},57145:function(t,e,i){var n=i(31269),a=i(72878),s=i(25091),r=i(12360),o=i(70273),c=i(13053),l=i(72309),d=i(17743),u=Array,h=a([].push);t.exports=function(t,e,i,a){for(var f,m,g,p=r(t),_=s(p),y=n(e,i),v=l(null),b=c(_),k=0;b>k;k++)g=_[k],(m=o(y(g,k,p)))in v?h(v[m],g):v[m]=[g];if(a&&(f=a(p))!==u)for(m in v)v[m]=d(f,v[m]);return v}},30338:function(t,e,i){var n=i(97934),a=i(71998),s=i(4576),r=i(36760);t.exports=function(t,e){e&&"string"==typeof t||a(t);var i=r(t);return s(a(void 0!==i?n(i,t):t))}},60933:function(t,e,i){var n=i(40810),a=i(57877),s=i(63983),r=i(12360),o=i(13053),c=i(47645);n({target:"Array",proto:!0},{flatMap:function(t){var e,i=r(this),n=o(i);return s(t),(e=c(i,0)).length=a(e,i,i,n,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},32126:function(t,e,i){i(35709)("flatMap")},25677:function(t,e,i){var n=i(40810),a=i(97934),s=i(63983),r=i(71998),o=i(4576),c=i(30338),l=i(79995),d=i(14181),u=i(92288),h=l((function(){for(var t,e,i=this.iterator,n=this.mapper;;){if(e=this.inner)try{if(!(t=r(a(e.next,e.iterator))).done)return t.value;this.inner=null}catch(s){d(i,"throw",s)}if(t=r(a(this.next,i)),this.done=!!t.done)return;try{this.inner=c(n(t.value,this.counter++),!1)}catch(s){d(i,"throw",s)}}}));n({target:"Iterator",proto:!0,real:!0,forced:u},{flatMap:function(t){return r(this),s(t),new h(o(this),{mapper:t,inner:null})}})},22139:function(t,e,i){var n=i(40810),a=i(57145),s=i(35709);n({target:"Array",proto:!0},{group:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("group")},34810:function(t,e,i){i(25677)},13633:function(t,e,i){i.d(e,{A:function(){return r}});i(71695),i(47021);var n=i(34151),a=i(18492),s=i(76808);function r(t,e,i){const[r,o]=(0,a.d)(null==i?void 0:i.in,t,e),c=(+r-+o)/s.vh;return(0,n.u)(null==i?void 0:i.roundingMethod)(c)}}}]);
//# sourceMappingURL=49311.9b7077dca04aa7d6.js.map