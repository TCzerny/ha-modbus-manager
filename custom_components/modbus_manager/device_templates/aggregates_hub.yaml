name: "Modbus Manager Aggregates"
version: 1
description: "Aggregate sensors across all Modbus Manager devices"

# Aggregates configuration
aggregates:
  - name: "Total Grid Power"
    group: "grid_power"
    method: "sum"
    unit_of_measurement: "W"
    device_class: "power"
    state_class: "measurement"
    icon: "mdi:transmission-tower"
    
  - name: "Total Battery Power"
    group: "battery_power"
    method: "sum"
    unit_of_measurement: "W"
    device_class: "power"
    state_class: "measurement"
    icon: "mdi:battery"
    
  - name: "Total Solar Power"
    group: "mppt_power"
    method: "sum"
    unit_of_measurement: "W"
    device_class: "power"
    state_class: "measurement"
    icon: "mdi:solar-power"
    
  - name: "Total Load Power"
    group: "load_power"
    method: "sum"
    unit_of_measurement: "W"
    device_class: "power"
    state_class: "measurement"
    icon: "mdi:home-lightning-bolt"
    
  - name: "Average Efficiency"
    group: "efficiency"
    method: "average"
    unit_of_measurement: "%"
    device_class: "power_factor"
    state_class: "measurement"
    icon: "mdi:gauge"
    
  - name: "Max Grid Power"
    group: "grid_power"
    method: "max"
    unit_of_measurement: "W"
    device_class: "power"
    state_class: "measurement"
    icon: "mdi:transmission-tower"
    
  - name: "Min Battery Power"
    group: "battery_power"
    method: "min"
    unit_of_measurement: "W"
    device_class: "power"
    state_class: "measurement"
    icon: "mdi:battery"
    
  - name: "Device Count"
    group: "grid_power"
    method: "count"
    unit_of_measurement: ""
    device_class: null
    state_class: "measurement"
    icon: "mdi:counter"
